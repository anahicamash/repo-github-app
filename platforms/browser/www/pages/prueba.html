<template>
    <div class="page">
      <div class="navbar">
        <div class="navbar-bg"></div>
        <div class="navbar-inner sliding">
          
          
    
        </div>
      </div>
      <div class="page-content">

       
        <div class="view">
          <div class="page">
            <div class="page-content login-screen-content">
              <div class="login-screen-title">English+</div>
              <form id="login" class="ignore-store-data">
                <div class="list">
                  <ul>
                    <li class="item-content item-input">
                      <div class="item-inner">
                        <div class="item-title item-label">Usuario</div>
                        <div class="item-input-wrap">
                          <input type="text" name="username" placeholder="Tu usuario" >
                        </div>
                      </div>
                    </li>
                    <li class="item-content item-input">
                      <div class="item-inner">
                        <div class="item-title item-label">Contraseña</div>
                        <div class="item-input-wrap">
                          <input type="password" name="password" placeholder="Tu contraseña" >
                        </div>
                      </div>
                    </li>
                  </ul>
                </div>
                <div class="list">
                  <ul>
                    <li><a class="item-link list-button" @click="inicio">Entrar</a></li>
                  </ul>
                   <div class="block-footer">
                    <p></p>
                    <p><a class="link login-screen-close" href="/registro/">¿No tienes una cuenta?</a></p>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
  
      </div>
    </div>
    </template>
    
    <script>
      return {
        data: function () {
          return {

          }
        },
        methods:{
          inicio: function() {


            app.dialog.preloader('Iniciando Sesión')
            var datos = app.form.convertToData('#login')
            var username=datos.username;
            var password=datos.password;
            db1.collection("users").where("email", "==", username).where("password", "==", password)
                    .get()
                    .then(function(querySnapshot) {
                        querySnapshot.forEach(function(doc) {
                          
                            // doc.data() is never undefined for query doc snapshots
                            console.log(doc.id, " => ", doc.data());
                            debugger;
                            if(doc.data().email=="anahicamash@gmail.coma" && doc.data().password=="anahicamash"  ){
                              app.dialog.close();
                              mainView.router.navigate('/principal/')
                          }else {
                            app.dialog.close();
                              mainView.router.navigate('/principalU/')
                          }
                          
                        });
                    })


            .catch(function(error) {
              app.dialog.close();
              app.dialog.alert('Verifique sus datos o verifique si tiene acceso a internet', 'Inicio de sesión fallido')
              console.log("Error getting documents: ", error);
            });

          }
        },
        on: {
          pageInit: function () {




          },
        },
      };
    </script>